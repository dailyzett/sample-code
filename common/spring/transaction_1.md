# 목차

# 1. 트랜잭션 관리

스프링은 일관된 트랜잭션 추상화 관리를 제공한다. 이로써 얻는 이점은 아래와 같다.

- JTA, JDBC, Hibernate, JPA 와 같은 다양한 트랜잭션 API 에서 일관된 프로그래밍이 가능
- 선언적 트랜잭션 관리를 지원한다.
- JTA 같은 복잡한 트랜잭션 API 보다 간단한 프로그래머틱한 트랜잭션 관리
- 스프링 데이터 액세스 추상화와의 통합

## 1.1 스프링 프레임워크의 트랜잭션 지원 모델의 장점

- 오래전, 자바 EE 개발자들은 트랜잭션 관리에 두 가지 선택을 했다.
  - global transaction
  - local transaction

문제는 두 가지 전부 심각한 제약이 존재한다. 이러한 제약을 스프링 프레임워크는 어떻게 해결해나가는 것일까?

### 1.1.1 글로벌 트랜잭션

글로벌 트랜잭션을 사용하면 RDB 및 메시지 큐와 같은 여러 트랜잭션 리소스로 작업할 수 있다.
애플리케이션 서버는 글로벌 트랜잭션을 관리하기 위해 JTA를 사용하지만 JTA는 여러가지로 복잡한 부분이 많다.

- _JTA UserTransaction_ 은 일반적으로 JNDI 에서 제공된다.
- JTA는 보통 응용 프로그램의 서버 환경에서만 사용할 수 있기 때문에, 글로벌 트랜잭션을 사용하면
응용 프로그램 코드의 재사용성이 떨어질 수 있다.

> **Note.**  
> JNDI는 애플리케이션에 이름 지정 및 디렉토리 기능을 제공하는 API 이다.


### 1.1.2 로컬 트랜잭션

로컬 트랜잭션은 JDBC 커넥션과 관련된 트랜잭션과 같이 리소스에 따라 다르다.
로컬 트랜잭션은 사용하긴 쉽지만 심각한 단점이 있다.

- 여러 트랜잭션 리소스를 거쳐서 작동할 수 없다.
- 예를 들어, JDBC 커넥션을 사용해서 트랜잭션을 관리하는 코드는 글로벌 JTA 트랜잭션 내에서 실행할 수 없다.
- 애플리케이션 서버는 트랜잭션 관리에 관여하기 때문에 여러개의 리소스에 대한 정확성을 보장하지 못한다.
- 로컬 트랜잭션은 프로그래밍 모델을 침범한다.


## 1.5 Programmatic Transaction Management

스프링 프레임워크는 두 가지 프로그래머틱한 트랜잭션 관리 방법을 제공한다.

- _TransactionTemplate_ 혹은 _TransactionalOperator_
- _TransactionManager_ 를 바로 구현

스프링 팀은 일반적으로 명령형 흐름의 프로그래머틱한 트랜잭션 관리를 위해 _TransactionTemplate_ 을 추천하고
리액티브한 코드에 대해서는 _TransactionalOperator_ 을 추천한다.
두 번째 방식은 JTA 를 사용하는 것과 비슷하지만 예외 처리가 덜 번거롭다.