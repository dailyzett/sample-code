# 목차

# 1. 고차 함수 정의

> 고차 함수는 다른 함수를 인자로 받거나 함수를 반환하는 함수다.

코틀린에서는 람다나 함수 참조를 사용해 함수를 값으로 표현할 수 있다.

표준 라이브러리인 *filter*는 술어 함수를 인자로 받으므로 고차 함수다.

```kotlin
list.filter { x > 0 }
```

## 1.1 함수 타입

함수 타입을 정의하려면,

1. 함수 파라미터의 타입을 괄호 안에 넣고,
2. 그 뒤에 화살표를 추가한 다음,
3. 함수의 반환 타입을 지정하면 된다.

```kotlin
class HigherFunction {
    @Test
    fun test() {
        val sum: (Int, Int) -> Int = { x, y -> x + y }
        val action: () -> Unit = { println(42) }
    }
}
```

이렇게 변수 타입을 함수 타입으로 지정하면 함수 타입에 있는 파라미터로부터 람다의 파라미터 타입을 유추할 수 있다. 따라서 람다 식 안에 굳이 파라미터 타입을 적을 필요가 없다.

널이 될 수 있는 함수 타입 변수를 선언하려면, 함수 타입 전체가 널이 될 수 있는 타입임을 선언하기
위해 함수 타입을 괄호로 감싸고 그 뒤에 `?`를 붙여야 한다.

```kotlin
fun nullFunctionTest() {
    var funOrNull: ((Int, Int) -> Int)? = null
}
```

참고로 위와 아래 코드는 다르다.

```kotlin
fun canReturnNullTest() {
    var canReturnNull: (Int, Int) -> Int? = { x, y -> null }
}
```

- *funOrNull*: 널이 될 수 있는 함수 타입
- *canReturnNull*: 널이 될 수 있는 반환 타입을 갖는 함수 타입

## 1.2 인자로 받은 함수 호출

표준 라이브러리 함수인 *filter*의 인자를 함수로 받아보자.

```kotlin
fun String.filter(predicate: (Char) -> Boolean): String {
    val sb = StringBuilder()

    for (index in indices) {
        val element = get(index)
        if (predicate(element)) sb.append(element)
    }
    return sb.toString()
}
```

```kotlin
@Test
fun test() {
    println("ab1c").filter { it in 'a'..'z' }
}

//abc
```

`a` 부터 `z`까지 문자만을 필터링하는 메서드이다.

- 람다 함수를 인자로 받아 순회한다.
- *predicate*가 *Char*이면 true를 반환한다. 아니면 false를 반환한다.

그래서 결괏값은 숫자 `1`을 제외한 `abc`가 도출된다.