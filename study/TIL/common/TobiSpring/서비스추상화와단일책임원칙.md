# 목차

- [목차](#목차)
- [3. 서비스 추상화와 단일 책임 원칙](#3-서비스-추상화와-단일-책임-원칙)
    - [수직, 수평 계층구조와 의존관계](#수직-수평-계층구조와-의존관계)
    - [단일 책임 원칙](#단일-책임-원칙)
      - [단일 책임 원칙의 장점](#단일-책임-원칙의-장점)

# 3. 서비스 추상화와 단일 책임 원칙

### 수직, 수평 계층구조와 의존관계

기술과 서비스에 대한 추상화 기법을 이용하면 특정 기술환경에 종속되지 않는 포터블한 코드를 만들 수 있다.
UserDao와 UserService는 각각 담당하는 코드의 기능적인 관심에 따라 분리되고,
서로 불필요한 영향을 주지 않으면서 독자적으로 확장가능하다. 같은 계층에서 **수평적인 분리**라고 할 수 있다.

트랜잭션의 추상화는 이것과 좀 다르다. 애플리케이션 비즈니스 로직과 그 하위에서 동작하는 로우레벨의 트랜잭션 기술이라는
아예 다른 계층의 특성을 갖는 코드를 분리한 것이다. 이것을 **수직적인 분리**라고 부른다.

애플리케이션 로직의 종류에 따른 수평적인 구분이든, 로직과 기술이라는 수직적인 구분이든, 낮은 결합도를 유지하면서
자유롭게 확장될 수 있는 구조를 만들 수 있는 것은 **스프링의 DI** 덕분이다.

### 단일 책임 원칙

이런 적절한 분리가 가져오는 특징은 객체지향 설계의 원칙 중의 하나인 **단일 책임 원칙**으로 설명할 수 있다.
만약 UserService에 트랜잭션 관리와 사용자 레벨 관리 두 가지 책임이 모두 있는 경우는 단일 책임 원칙이 잘 지켜지지 않은 경우이다.

#### 단일 책임 원칙의 장점

단일 책임 원칙을 잘 지키고 있다면, 어떤 변경이 필요할 때 수정 대상이 명확하다.
만약 기술이 바뀌면 기술 계층과의 연동을 담당하는 기술 추상화 계층의 설정만 바꿔주면 된다.
데이터를 가져오는 테이블의 이름이 바뀌었다면 데이터 액세스 로직을 담고 있는 UserDao를 변경하면 된다.

단일 책임 원칙을 잘 지키는 코드를 만들려면 **인터페이스를 도입하고 이를 DI로 연결해야 한다.**
그 결과로 단일 책임 원칙뿐 아니라 개방 폐쇄 원칙도 잘 지켜지는 부수 효과를 만든다.



