## 자바와 절차적/구조적 프로그래밍


### 1. T 메모리 구조

자바의 T 메모리의 구조는 다음과 같이 생겼다.
T 메모리는 스태틱 영역, 스택 영역 및 힙 영역으로 나뉜다.

![img](https://media.vlpt.us/images/dailyzett/post/b680d663-e97c-4189-9491-b0115035c445/Untitled%20Diagram%20(2).jpg)

각 영역마다 특징이 있는데 다음과 같다.

- **스태틱 영역** : 패키지나 클래스가 호출될 때 사용되는 영역이다.
- **스택 영역** : 스택 프레임을 이용하는 영역이다. 기본형 타입의 변수는 값이 저장되고 참조형 타입의 변수는 참조값만 저장된다.
이 참조값을 통해 힙 영역에 있는 인스턴스를 가리키도록 할 수 있다.
'{' 를 만날 때마다 스택 프레임이 하나씩 생기고 '}' 를 만나면 스택 프레임이 사라진다. 쓰레드도 스택 프레임에서 생성되는데,
쓰레드가 여러개라면 스택 프레임 내부에서 쓰레드 개수만큼 분할해서 사용한다.
- **힙 영역** : 생성된 객체(인스턴스)들이 올라가는 영역이다.

#### 1.1 각 영역에 할당되는 변수의 종류

> 변수는 스태틱 영역, 힙 영역, 스택 영역 모든 곳에서 존재한다.

각 영역에 할당되는 변수에 따라서 변수의 종류가 나뉜다.

- 스태틱 영역 : 클래스 멤버 변수
- 힙 영역 : 객체 멤버 변수
- 스택 영역 : 지역 변수

지역 변수는 스택 영역에서 존재한다. 따라서 스택 프레임이 사라지면 지역 변수도 사라진다.
클래스 멤버 변수는 스태틱 영역에서 존재한다. 스태틱 영역은 정적(static)인 상태이기 때문에 JVM이 종료되지 않는 이상 메모리에 계속 남는다.
객체 멤버 변수는 힙 영역에서 존재한다. 힙 영역에 존재하기 때문에 GC에 의해 메모리에서 자동 소거된다.


### 2. 멀티 쓰레드 / 멀티 프로세스의 이해

> 멀티 쓰레드는 스택 영역을 쓰레드 개수만큼 분할해서 쓰는 것이다. 반면 멀티 프로세스는
> 다수의 데이터 저장 영역, 즉 다수의 T 메모리를 갖는 구조이다.

멀티 프로세스는 T 메모리 자체가 분리되어있어서 서로 간의 참조가 불가능하다. 반면 멀티 쓰레드는
스택 영역에서 분할해서 사용하기 때문에 다른 스택 영역에 있는 쓰레드에 접근할 수는 없지만, 스태틱 영역과
힙 영역은 공유해서 사용이 가능하다. 따라서 멀티 프로세스 대비 메모리를 적게 사용할 수 있다.





